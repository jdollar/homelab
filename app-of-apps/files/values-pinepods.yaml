---
# Main application configuration
service:
  type: ClusterIP
  port: 8040

ingress:
  enabled: true
  className: "traefik"
  annotations:
    cert-manager.io/cluster-issuer: letsencrypt-prod
    traefik.ingress.kubernetes.io/router.middlewares: default-redirect-https@kubernetescrd
  hosts:
    - host: &ingressHost pinepods.joeldollarhide.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: pinepods-tls
      hosts:
        - *ingressHost

# Persistent storage
persistence:
  enabled: true
  downloads:
    storageClass: "nfs" # Use default storage class
    size: 5Gi
  backups:
    storageClass: "nfs"
    size: 2Gi

# Database configuration
postgresql:
  enabled: false

# Valkey/Redis configuration
valkey:
  enabled: false

# Optional backend API (self-hosted search)
backend:
  enabled: false
  secrets:
    apiKey: "YOUR_PODCAST_INDEX_KEY"
    apiSecret: "YOUR_PODCAST_INDEX_SECRET"

# Optional PodPeople database
podpeople:
  enabled: false

# Application environment
env:
  FULLNAME: "Admin User"
  DEBUG_MODE: "false"
  HOSTNAME: "https://pinepods.joeldollarhide.com"
  VALKEY_HOST: "redis-headless.default.svc.cluster.local"
  VALKEY_PORT: 6379

externalDatabase:
  host: pinepods-pinepods-app-rw
  port: 5432
  user: app
  database: app
  existingSecret:
    enabled: true
    name: pinepods-pinepods-app-app
    key: password
